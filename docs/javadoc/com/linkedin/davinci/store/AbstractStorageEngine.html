<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>AbstractStorageEngine (venice API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AbstractStorageEngine (venice API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":6,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":6,"i33":10,"i34":10,"i35":10,"i36":6,"i37":10,"i38":10,"i39":6,"i40":10,"i41":10,"i42":10,"i43":9,"i44":10,"i45":10,"i46":10,"i47":10,"i48":10,"i49":10,"i50":10,"i51":10,"i52":10,"i53":10,"i54":10,"i55":10,"i56":10,"i57":10,"i58":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.linkedin.davinci.store</a></div>
<h2 title="Class AbstractStorageEngine" class="title">Class AbstractStorageEngine&lt;Partition extends <a href="AbstractStoragePartition.html" title="class in com.linkedin.davinci.store">AbstractStoragePartition</a>&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.linkedin.davinci.store.AbstractStorageEngine&lt;Partition&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>java.io.Closeable</code>, <code>java.lang.AutoCloseable</code></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="blackhole/BlackHoleStorageEngine.html" title="class in com.linkedin.davinci.store.blackhole">BlackHoleStorageEngine</a></code>, <code><a href="memory/InMemoryStorageEngine.html" title="class in com.linkedin.davinci.store.memory">InMemoryStorageEngine</a></code>, <code><a href="rocksdb/RocksDBStorageEngine.html" title="class in com.linkedin.davinci.store.rocksdb">RocksDBStorageEngine</a></code>, <code><a href="cache/VeniceStoreCacheStorageEngine.html" title="class in com.linkedin.davinci.store.cache">VeniceStoreCacheStorageEngine</a></code></dd>
</dl>
<hr>
<pre>public abstract class <span class="typeNameLabel">AbstractStorageEngine&lt;Partition extends <a href="AbstractStoragePartition.html" title="class in com.linkedin.davinci.store">AbstractStoragePartition</a>&gt;</span>
extends java.lang.Object
implements java.io.Closeable</pre>
<div class="block">A base storage abstract class which is actually responsible for data persistence. This
 abstract class implies all the usual responsibilities of a Store implementation,
 <p/>
 There are several proposals for storage-partition model:
 <p/>
 1. One storage engine for all stores
 1.1 One store uses one database, i.e. all partitions of the store will be in one database.
 1.2 One store uses multiple databases, i.e. one partition per database.
 2. Each store handled by one storage engine
 2.1 All partitions of the store will be handled in one database (current Voldemort implementation)
 2.2 One partition per database (Sudha suggests)
 3. Each partition handled by one storage engine (original proposal before todayâ€™s discussion, super high overhead)
 <p/>
 The point of having one storage engine(environment) or one database for one partition, is to simplify the complexity of rebalancing/partition migration/host swap.
 The team agreed to take (2.2) as default storage-partition model for now, and run performance tests to see if it goes well.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#METADATA_PARTITION_ID">METADATA_PARTITION_ID</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.lang.String,com.linkedin.venice.serialization.avro.InternalAvroSpecificSerializer,com.linkedin.venice.serialization.avro.InternalAvroSpecificSerializer)">AbstractStorageEngine</a></span>&#8203;(java.lang.String&nbsp;storeVersionName,
                     <a href="../../venice/serialization/avro/InternalAvroSpecificSerializer.html" title="class in com.linkedin.venice.serialization.avro">InternalAvroSpecificSerializer</a>&lt;<a href="../../venice/kafka/protocol/state/StoreVersionState.html" title="class in com.linkedin.venice.kafka.protocol.state">StoreVersionState</a>&gt;&nbsp;storeVersionStateSerializer,
                     <a href="../../venice/serialization/avro/InternalAvroSpecificSerializer.html" title="class in com.linkedin.venice.serialization.avro">InternalAvroSpecificSerializer</a>&lt;<a href="../../venice/kafka/protocol/state/PartitionState.html" title="class in com.linkedin.venice.kafka.protocol.state">PartitionState</a>&gt;&nbsp;partitionStateSerializer)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addStoragePartition(int)">addStoragePartition</a></span>&#8203;(int&nbsp;partitionId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addStoragePartition(com.linkedin.davinci.store.StoragePartitionConfig)">addStoragePartition</a></span>&#8203;(<a href="StoragePartitionConfig.html" title="class in com.linkedin.davinci.store">StoragePartitionConfig</a>&nbsp;storagePartitionConfig)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#adjustStoragePartition(com.linkedin.davinci.store.StoragePartitionConfig)">adjustStoragePartition</a></span>&#8203;(<a href="StoragePartitionConfig.html" title="class in com.linkedin.davinci.store">StoragePartitionConfig</a>&nbsp;partitionConfig)</code></th>
<td class="colLast">
<div class="block">Adjust the opened storage partition according to the provided storagePartitionConfig.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#beginBatchWrite(com.linkedin.davinci.store.StoragePartitionConfig,java.util.Map,java.util.Optional)">beginBatchWrite</a></span>&#8203;(<a href="StoragePartitionConfig.html" title="class in com.linkedin.davinci.store">StoragePartitionConfig</a>&nbsp;storagePartitionConfig,
               java.util.Map&lt;java.lang.String,&#8203;java.lang.String&gt;&nbsp;checkpointedInfo,
               java.util.Optional&lt;java.util.function.Supplier&lt;byte[]&gt;&gt;&nbsp;checksumSupplier)</code></th>
<td class="colLast">
<div class="block">A lot of storage engines support efficient methods for performing large
 number of writes (puts/deletes) against the data source.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkDatabaseIntegrity(int,java.util.Map,com.linkedin.davinci.store.StoragePartitionConfig)">checkDatabaseIntegrity</a></span>&#8203;(int&nbsp;partitionId,
                      java.util.Map&lt;java.lang.String,&#8203;java.lang.String&gt;&nbsp;checkpointedInfo,
                      <a href="StoragePartitionConfig.html" title="class in com.linkedin.davinci.store">StoragePartitionConfig</a>&nbsp;storagePartitionConfig)</code></th>
<td class="colLast">
<div class="block">checks whether the current state of the database is valid
 during the start of ingestion.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clearPartitionOffset(int)">clearPartitionOffset</a></span>&#8203;(int&nbsp;partitionId)</code></th>
<td class="colLast">
<div class="block">Clear the offset associated with the partitionId in the metadata partition.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clearStoreVersionState()">clearStoreVersionState</a></span>()</code></th>
<td class="colLast">
<div class="block">Clear the store version state in the metadata partition.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#closeMetadataPartition()">closeMetadataPartition</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#closePartition(int)">closePartition</a></span>&#8203;(int&nbsp;partitionId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#containsPartition(int)">containsPartition</a></span>&#8203;(int&nbsp;partitionId)</code></th>
<td class="colLast">
<div class="block">Return true or false based on whether a given partition exists within this storage engine</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#containsPartition(int,com.linkedin.venice.meta.PartitionerConfig)">containsPartition</a></span>&#8203;(int&nbsp;userPartition,
                 <a href="../../venice/meta/PartitionerConfig.html" title="interface in com.linkedin.venice.meta">PartitionerConfig</a>&nbsp;partitionerConfig)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>abstract <a href="AbstractStorageEngine.html" title="type parameter in AbstractStorageEngine">Partition</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createStoragePartition(com.linkedin.davinci.store.StoragePartitionConfig)">createStoragePartition</a></span>&#8203;(<a href="StoragePartitionConfig.html" title="class in com.linkedin.davinci.store">StoragePartitionConfig</a>&nbsp;partitionConfig)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#delete(int,byte%5B%5D)">delete</a></span>&#8203;(int&nbsp;partitionId,
      byte[]&nbsp;key)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteWithReplicationMetadata(int,byte%5B%5D,byte%5B%5D)">deleteWithReplicationMetadata</a></span>&#8203;(int&nbsp;partitionId,
                             byte[]&nbsp;key,
                             byte[]&nbsp;replicationMetadata)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#drop()">drop</a></span>()</code></th>
<td class="colLast">
<div class="block">Drop the whole store</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#dropMetadataPartition()">dropMetadataPartition</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#dropPartition(int)">dropPartition</a></span>&#8203;(int&nbsp;partitionId)</code></th>
<td class="colLast">
<div class="block">Removes and returns a partition from the current store</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#endBatchWrite(com.linkedin.davinci.store.StoragePartitionConfig)">endBatchWrite</a></span>&#8203;(<a href="StoragePartitionConfig.html" title="class in com.linkedin.davinci.store">StoragePartitionConfig</a>&nbsp;storagePartitionConfig)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#get(int,byte%5B%5D)">get</a></span>&#8203;(int&nbsp;partitionId,
   byte[]&nbsp;key)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>java.nio.ByteBuffer</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#get(int,byte%5B%5D,java.nio.ByteBuffer)">get</a></span>&#8203;(int&nbsp;partitionId,
   byte[]&nbsp;key,
   java.nio.ByteBuffer&nbsp;valueToBePopulated)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#get(int,java.nio.ByteBuffer)">get</a></span>&#8203;(int&nbsp;partitionId,
   java.nio.ByteBuffer&nbsp;keyBuffer)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getByKeyPrefix(int,byte%5B%5D,com.linkedin.davinci.callback.BytesStreamingCallback)">getByKeyPrefix</a></span>&#8203;(int&nbsp;partitionId,
              byte[]&nbsp;partialKey,
              <a href="../callback/BytesStreamingCallback.html" title="class in com.linkedin.davinci.callback">BytesStreamingCallback</a>&nbsp;bytesStreamingCallback)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCachedRMDSizeInBytes()">getCachedRMDSizeInBytes</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCachedStoreSizeInBytes()">getCachedStoreSizeInBytes</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code><a href="../../venice/compression/CompressionStrategy.html" title="enum in com.linkedin.venice.compression">CompressionStrategy</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCompressionStrategy()">getCompressionStrategy</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code><a href="AbstractStoragePartition.html" title="class in com.linkedin.davinci.store">AbstractStoragePartition</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMetadataPartition()">getMetadataPartition</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNumberOfPartitions()">getNumberOfPartitions</a></span>()</code></th>
<td class="colLast">
<div class="block">A function which behaves like <code>Map.size()</code>, in the sense that it ignores empty
 (null) slots in the list.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>java.util.Set&lt;java.lang.Integer&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPartitionIds()">getPartitionIds</a></span>()</code></th>
<td class="colLast">
<div class="block">Get all Partition Ids which are assigned to the current Node.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>java.util.Optional&lt;<a href="../../venice/offsets/OffsetRecord.html" title="class in com.linkedin.venice.offsets">OffsetRecord</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPartitionOffset(int)">getPartitionOffset</a></span>&#8203;(int&nbsp;partitionId)</code></th>
<td class="colLast">
<div class="block">Retrieve the offset associated with the partitionId from the metadata partition.</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code><a href="AbstractStoragePartition.html" title="class in com.linkedin.davinci.store">AbstractStoragePartition</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPartitionOrThrow(int)">getPartitionOrThrow</a></span>&#8203;(int&nbsp;partitionId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPartitionSizeInBytes(int)">getPartitionSizeInBytes</a></span>&#8203;(int&nbsp;partitionId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>abstract java.util.Set&lt;java.lang.Integer&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPersistedPartitionIds()">getPersistedPartitionIds</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getReplicationMetadata(int,byte%5B%5D)">getReplicationMetadata</a></span>&#8203;(int&nbsp;partitionId,
                      byte[]&nbsp;key)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRMDSizeInBytes()">getRMDSizeInBytes</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i35" class="rowColor">
<td class="colFirst"><code>java.util.concurrent.locks.ReadWriteLock</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRWLockForPartitionOrThrow(int)">getRWLockForPartitionOrThrow</a></span>&#8203;(int&nbsp;partitionId)</code></th>
<td class="colLast">
<div class="block">Making it public is for testing purpose.</div>
</td>
</tr>
<tr id="i36" class="altColor">
<td class="colFirst"><code>abstract long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getStoreSizeInBytes()">getStoreSizeInBytes</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i37" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getStoreVersionName()">getStoreVersionName</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i38" class="altColor">
<td class="colFirst"><code><a href="../../venice/kafka/protocol/state/StoreVersionState.html" title="class in com.linkedin.venice.kafka.protocol.state">StoreVersionState</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getStoreVersionState()">getStoreVersionState</a></span>()</code></th>
<td class="colLast">
<div class="block">Retrieve the store version state from the metadata partition.</div>
</td>
</tr>
<tr id="i39" class="rowColor">
<td class="colFirst"><code>abstract <a href="../../venice/meta/PersistenceType.html" title="enum in com.linkedin.venice.meta">PersistenceType</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getType()">getType</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i40" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#hasMemorySpaceLeft()">hasMemorySpaceLeft</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i41" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isChunked()">isChunked</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i42" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isClosed()">isClosed</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i43" class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isMetadataPartition(int)">isMetadataPartition</a></span>&#8203;(int&nbsp;partitionId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i44" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#preparePartitionForReading(int)">preparePartitionForReading</a></span>&#8203;(int&nbsp;partitionId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i45" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#put(int,byte%5B%5D,byte%5B%5D)">put</a></span>&#8203;(int&nbsp;partitionId,
   byte[]&nbsp;key,
   byte[]&nbsp;value)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i46" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#put(int,byte%5B%5D,java.nio.ByteBuffer)">put</a></span>&#8203;(int&nbsp;partitionId,
   byte[]&nbsp;key,
   java.nio.ByteBuffer&nbsp;value)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i47" class="rowColor">
<td class="colFirst"><code>&lt;K,&#8203;V&gt;<br>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#put(int,K,V)">put</a></span>&#8203;(int&nbsp;partitionId,
   K&nbsp;key,
   V&nbsp;value)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i48" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#putPartitionOffset(int,com.linkedin.venice.offsets.OffsetRecord)">putPartitionOffset</a></span>&#8203;(int&nbsp;partitionId,
                  <a href="../../venice/offsets/OffsetRecord.html" title="class in com.linkedin.venice.offsets">OffsetRecord</a>&nbsp;offsetRecord)</code></th>
<td class="colLast">
<div class="block">Put the offset associated with the partitionId into the metadata partition.</div>
</td>
</tr>
<tr id="i49" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#putReplicationMetadata(int,byte%5B%5D,byte%5B%5D)">putReplicationMetadata</a></span>&#8203;(int&nbsp;partitionId,
                      byte[]&nbsp;key,
                      byte[]&nbsp;replicationMetadata)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i50" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#putStoreVersionState(com.linkedin.venice.kafka.protocol.state.StoreVersionState)">putStoreVersionState</a></span>&#8203;(<a href="../../venice/kafka/protocol/state/StoreVersionState.html" title="class in com.linkedin.venice.kafka.protocol.state">StoreVersionState</a>&nbsp;versionState)</code></th>
<td class="colLast">
<div class="block">Put the store version state into the metadata partition.</div>
</td>
</tr>
<tr id="i51" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#putWithReplicationMetadata(int,byte%5B%5D,java.nio.ByteBuffer,byte%5B%5D)">putWithReplicationMetadata</a></span>&#8203;(int&nbsp;partitionId,
                          byte[]&nbsp;key,
                          java.nio.ByteBuffer&nbsp;value,
                          byte[]&nbsp;replicationMetadata)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i52" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#reopenStoragePartition(int)">reopenStoragePartition</a></span>&#8203;(int&nbsp;partitionId)</code></th>
<td class="colLast">
<div class="block">Reopen the underlying database.</div>
</td>
</tr>
<tr id="i53" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#restoreStoragePartitions()">restoreStoragePartitions</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i54" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#restoreStoragePartitions(boolean,boolean)">restoreStoragePartitions</a></span>&#8203;(boolean&nbsp;restoreMetadataPartition,
                        boolean&nbsp;restoreDataPartitions)</code></th>
<td class="colLast">
<div class="block">Load the existing storage partitions.</div>
</td>
</tr>
<tr id="i55" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#suppressLogs(boolean)">suppressLogs</a></span>&#8203;(boolean&nbsp;suppressLogs)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i56" class="altColor">
<td class="colFirst"><code>java.util.Map&lt;java.lang.String,&#8203;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sync(int)">sync</a></span>&#8203;(int&nbsp;partitionId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i57" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toString()">toString</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i58" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateStoreVersionStateCache(com.linkedin.venice.kafka.protocol.state.StoreVersionState)">updateStoreVersionStateCache</a></span>&#8203;(<a href="../../venice/kafka/protocol/state/StoreVersionState.html" title="class in com.linkedin.venice.kafka.protocol.state">StoreVersionState</a>&nbsp;versionState)</code></th>
<td class="colLast">
<div class="block">Used in ingestion isolation mode update the storage engine's cache in sync with the updates to the state in
 <a href="../ingestion/main/MainIngestionStorageMetadataService.html" title="class in com.linkedin.davinci.ingestion.main"><code>MainIngestionStorageMetadataService</code></a></div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="METADATA_PARTITION_ID">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>METADATA_PARTITION_ID</h4>
<pre>public static final&nbsp;int METADATA_PARTITION_ID</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.linkedin.davinci.store.AbstractStorageEngine.METADATA_PARTITION_ID">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(java.lang.String,com.linkedin.venice.serialization.avro.InternalAvroSpecificSerializer,com.linkedin.venice.serialization.avro.InternalAvroSpecificSerializer)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AbstractStorageEngine</h4>
<pre>public&nbsp;AbstractStorageEngine&#8203;(java.lang.String&nbsp;storeVersionName,
                             <a href="../../venice/serialization/avro/InternalAvroSpecificSerializer.html" title="class in com.linkedin.venice.serialization.avro">InternalAvroSpecificSerializer</a>&lt;<a href="../../venice/kafka/protocol/state/StoreVersionState.html" title="class in com.linkedin.venice.kafka.protocol.state">StoreVersionState</a>&gt;&nbsp;storeVersionStateSerializer,
                             <a href="../../venice/serialization/avro/InternalAvroSpecificSerializer.html" title="class in com.linkedin.venice.serialization.avro">InternalAvroSpecificSerializer</a>&lt;<a href="../../venice/kafka/protocol/state/PartitionState.html" title="class in com.linkedin.venice.kafka.protocol.state">PartitionState</a>&gt;&nbsp;partitionStateSerializer)</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getRWLockForPartitionOrThrow(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRWLockForPartitionOrThrow</h4>
<pre class="methodSignature">public&nbsp;java.util.concurrent.locks.ReadWriteLock&nbsp;getRWLockForPartitionOrThrow&#8203;(int&nbsp;partitionId)</pre>
<div class="block">Making it public is for testing purpose.</div>
</li>
</ul>
<a id="getStoreVersionName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStoreVersionName</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;getStoreVersionName()</pre>
</li>
</ul>
<a id="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
<a id="getType()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getType</h4>
<pre class="methodSignature">public abstract&nbsp;<a href="../../venice/meta/PersistenceType.html" title="enum in com.linkedin.venice.meta">PersistenceType</a>&nbsp;getType()</pre>
</li>
</ul>
<a id="getStoreSizeInBytes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStoreSizeInBytes</h4>
<pre class="methodSignature">public abstract&nbsp;long&nbsp;getStoreSizeInBytes()</pre>
</li>
</ul>
<a id="getCachedStoreSizeInBytes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCachedStoreSizeInBytes</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getCachedStoreSizeInBytes()</pre>
</li>
</ul>
<a id="getRMDSizeInBytes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRMDSizeInBytes</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getRMDSizeInBytes()</pre>
</li>
</ul>
<a id="getCachedRMDSizeInBytes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCachedRMDSizeInBytes</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getCachedRMDSizeInBytes()</pre>
</li>
</ul>
<a id="getPersistedPartitionIds()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPersistedPartitionIds</h4>
<pre class="methodSignature">public abstract&nbsp;java.util.Set&lt;java.lang.Integer&gt;&nbsp;getPersistedPartitionIds()</pre>
</li>
</ul>
<a id="createStoragePartition(com.linkedin.davinci.store.StoragePartitionConfig)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createStoragePartition</h4>
<pre class="methodSignature">public abstract&nbsp;<a href="AbstractStorageEngine.html" title="type parameter in AbstractStorageEngine">Partition</a>&nbsp;createStoragePartition&#8203;(<a href="StoragePartitionConfig.html" title="class in com.linkedin.davinci.store">StoragePartitionConfig</a>&nbsp;partitionConfig)</pre>
</li>
</ul>
<a id="restoreStoragePartitions(boolean,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreStoragePartitions</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;restoreStoragePartitions&#8203;(boolean&nbsp;restoreMetadataPartition,
                                        boolean&nbsp;restoreDataPartitions)</pre>
<div class="block">Load the existing storage partitions.
 The implementation should decide when to call this function properly to restore partitions.</div>
</li>
</ul>
<a id="restoreStoragePartitions()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreStoragePartitions</h4>
<pre class="methodSignature">protected final&nbsp;void&nbsp;restoreStoragePartitions()</pre>
</li>
</ul>
<a id="getMetadataPartition()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMetadataPartition</h4>
<pre class="methodSignature">public&nbsp;<a href="AbstractStoragePartition.html" title="class in com.linkedin.davinci.store">AbstractStoragePartition</a>&nbsp;getMetadataPartition()</pre>
</li>
</ul>
<a id="preparePartitionForReading(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>preparePartitionForReading</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;preparePartitionForReading&#8203;(int&nbsp;partitionId)</pre>
</li>
</ul>
<a id="adjustStoragePartition(com.linkedin.davinci.store.StoragePartitionConfig)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>adjustStoragePartition</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;adjustStoragePartition&#8203;(<a href="StoragePartitionConfig.html" title="class in com.linkedin.davinci.store">StoragePartitionConfig</a>&nbsp;partitionConfig)</pre>
<div class="block">Adjust the opened storage partition according to the provided storagePartitionConfig.
 It will throw exception if there is no opened storage partition for the given partition id.</div>
</li>
</ul>
<a id="addStoragePartition(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addStoragePartition</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addStoragePartition&#8203;(int&nbsp;partitionId)</pre>
</li>
</ul>
<a id="addStoragePartition(com.linkedin.davinci.store.StoragePartitionConfig)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addStoragePartition</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addStoragePartition&#8203;(<a href="StoragePartitionConfig.html" title="class in com.linkedin.davinci.store">StoragePartitionConfig</a>&nbsp;storagePartitionConfig)</pre>
</li>
</ul>
<a id="closePartition(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closePartition</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;closePartition&#8203;(int&nbsp;partitionId)</pre>
</li>
</ul>
<a id="closeMetadataPartition()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeMetadataPartition</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;closeMetadataPartition()</pre>
</li>
</ul>
<a id="dropPartition(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dropPartition</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;dropPartition&#8203;(int&nbsp;partitionId)</pre>
<div class="block">Removes and returns a partition from the current store</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>partitionId</code> - - id of partition to retrieve and remove</dd>
</dl>
</li>
</ul>
<a id="dropMetadataPartition()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dropMetadataPartition</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;dropMetadataPartition()</pre>
</li>
</ul>
<a id="drop()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>drop</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;drop()</pre>
<div class="block">Drop the whole store</div>
</li>
</ul>
<a id="sync(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sync</h4>
<pre class="methodSignature">public&nbsp;java.util.Map&lt;java.lang.String,&#8203;java.lang.String&gt;&nbsp;sync&#8203;(int&nbsp;partitionId)</pre>
</li>
</ul>
<a id="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;close()
           throws <a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.lang.AutoCloseable</code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.io.Closeable</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></code></dd>
</dl>
</li>
</ul>
<a id="isClosed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isClosed</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isClosed()</pre>
</li>
</ul>
<a id="checkDatabaseIntegrity(int,java.util.Map,com.linkedin.davinci.store.StoragePartitionConfig)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkDatabaseIntegrity</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;checkDatabaseIntegrity&#8203;(int&nbsp;partitionId,
                                      java.util.Map&lt;java.lang.String,&#8203;java.lang.String&gt;&nbsp;checkpointedInfo,
                                      <a href="StoragePartitionConfig.html" title="class in com.linkedin.davinci.store">StoragePartitionConfig</a>&nbsp;storagePartitionConfig)</pre>
<div class="block">checks whether the current state of the database is valid
 during the start of ingestion.</div>
</li>
</ul>
<a id="beginBatchWrite(com.linkedin.davinci.store.StoragePartitionConfig,java.util.Map,java.util.Optional)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beginBatchWrite</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;beginBatchWrite&#8203;(<a href="StoragePartitionConfig.html" title="class in com.linkedin.davinci.store">StoragePartitionConfig</a>&nbsp;storagePartitionConfig,
                            java.util.Map&lt;java.lang.String,&#8203;java.lang.String&gt;&nbsp;checkpointedInfo,
                            java.util.Optional&lt;java.util.function.Supplier&lt;byte[]&gt;&gt;&nbsp;checksumSupplier)</pre>
<div class="block">A lot of storage engines support efficient methods for performing large
 number of writes (puts/deletes) against the data source. This method puts
 the storage engine in this batch write mode</div>
</li>
</ul>
<a id="endBatchWrite(com.linkedin.davinci.store.StoragePartitionConfig)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>endBatchWrite</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;endBatchWrite&#8203;(<a href="StoragePartitionConfig.html" title="class in com.linkedin.davinci.store">StoragePartitionConfig</a>&nbsp;storagePartitionConfig)</pre>
</li>
</ul>
<a id="reopenStoragePartition(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reopenStoragePartition</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;reopenStoragePartition&#8203;(int&nbsp;partitionId)</pre>
<div class="block">Reopen the underlying database.</div>
</li>
</ul>
<a id="put(int,byte[],byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>put</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;put&#8203;(int&nbsp;partitionId,
                byte[]&nbsp;key,
                byte[]&nbsp;value)
         throws <a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></code></dd>
</dl>
</li>
</ul>
<a id="put(int,byte[],java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>put</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;put&#8203;(int&nbsp;partitionId,
                byte[]&nbsp;key,
                java.nio.ByteBuffer&nbsp;value)
         throws <a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></code></dd>
</dl>
</li>
</ul>
<a id="putWithReplicationMetadata(int,byte[],java.nio.ByteBuffer,byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>putWithReplicationMetadata</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;putWithReplicationMetadata&#8203;(int&nbsp;partitionId,
                                       byte[]&nbsp;key,
                                       java.nio.ByteBuffer&nbsp;value,
                                       byte[]&nbsp;replicationMetadata)
                                throws <a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></code></dd>
</dl>
</li>
</ul>
<a id="putReplicationMetadata(int,byte[],byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>putReplicationMetadata</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;putReplicationMetadata&#8203;(int&nbsp;partitionId,
                                   byte[]&nbsp;key,
                                   byte[]&nbsp;replicationMetadata)
                            throws <a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></code></dd>
</dl>
</li>
</ul>
<a id="put(int,java.lang.Object,java.lang.Object)">
<!--   -->
</a><a id="put(int,K,V)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>put</h4>
<pre class="methodSignature">public&nbsp;&lt;K,&#8203;V&gt;&nbsp;void&nbsp;put&#8203;(int&nbsp;partitionId,
                            K&nbsp;key,
                            V&nbsp;value)</pre>
</li>
</ul>
<a id="get(int,byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre class="methodSignature">public&nbsp;byte[]&nbsp;get&#8203;(int&nbsp;partitionId,
                  byte[]&nbsp;key)
           throws <a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></code></dd>
</dl>
</li>
</ul>
<a id="get(int,byte[],java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre class="methodSignature">public&nbsp;java.nio.ByteBuffer&nbsp;get&#8203;(int&nbsp;partitionId,
                               byte[]&nbsp;key,
                               java.nio.ByteBuffer&nbsp;valueToBePopulated)
                        throws <a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></code></dd>
</dl>
</li>
</ul>
<a id="get(int,java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre class="methodSignature">public&nbsp;byte[]&nbsp;get&#8203;(int&nbsp;partitionId,
                  java.nio.ByteBuffer&nbsp;keyBuffer)
           throws <a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></code></dd>
</dl>
</li>
</ul>
<a id="getByKeyPrefix(int,byte[],com.linkedin.davinci.callback.BytesStreamingCallback)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getByKeyPrefix</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;getByKeyPrefix&#8203;(int&nbsp;partitionId,
                           byte[]&nbsp;partialKey,
                           <a href="../callback/BytesStreamingCallback.html" title="class in com.linkedin.davinci.callback">BytesStreamingCallback</a>&nbsp;bytesStreamingCallback)</pre>
</li>
</ul>
<a id="delete(int,byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;delete&#8203;(int&nbsp;partitionId,
                   byte[]&nbsp;key)
            throws <a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></code></dd>
</dl>
</li>
</ul>
<a id="deleteWithReplicationMetadata(int,byte[],byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteWithReplicationMetadata</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;deleteWithReplicationMetadata&#8203;(int&nbsp;partitionId,
                                          byte[]&nbsp;key,
                                          byte[]&nbsp;replicationMetadata)
                                   throws <a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></code></dd>
</dl>
</li>
</ul>
<a id="getReplicationMetadata(int,byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReplicationMetadata</h4>
<pre class="methodSignature">public&nbsp;byte[]&nbsp;getReplicationMetadata&#8203;(int&nbsp;partitionId,
                                     byte[]&nbsp;key)</pre>
</li>
</ul>
<a id="putPartitionOffset(int,com.linkedin.venice.offsets.OffsetRecord)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>putPartitionOffset</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;putPartitionOffset&#8203;(int&nbsp;partitionId,
                               <a href="../../venice/offsets/OffsetRecord.html" title="class in com.linkedin.venice.offsets">OffsetRecord</a>&nbsp;offsetRecord)</pre>
<div class="block">Put the offset associated with the partitionId into the metadata partition.</div>
</li>
</ul>
<a id="getPartitionOffset(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPartitionOffset</h4>
<pre class="methodSignature">public&nbsp;java.util.Optional&lt;<a href="../../venice/offsets/OffsetRecord.html" title="class in com.linkedin.venice.offsets">OffsetRecord</a>&gt;&nbsp;getPartitionOffset&#8203;(int&nbsp;partitionId)</pre>
<div class="block">Retrieve the offset associated with the partitionId from the metadata partition.</div>
</li>
</ul>
<a id="clearPartitionOffset(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearPartitionOffset</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;clearPartitionOffset&#8203;(int&nbsp;partitionId)</pre>
<div class="block">Clear the offset associated with the partitionId in the metadata partition.</div>
</li>
</ul>
<a id="isMetadataPartition(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isMetadataPartition</h4>
<pre class="methodSignature">public static&nbsp;boolean&nbsp;isMetadataPartition&#8203;(int&nbsp;partitionId)</pre>
</li>
</ul>
<a id="putStoreVersionState(com.linkedin.venice.kafka.protocol.state.StoreVersionState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>putStoreVersionState</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;putStoreVersionState&#8203;(<a href="../../venice/kafka/protocol/state/StoreVersionState.html" title="class in com.linkedin.venice.kafka.protocol.state">StoreVersionState</a>&nbsp;versionState)</pre>
<div class="block">Put the store version state into the metadata partition.</div>
</li>
</ul>
<a id="updateStoreVersionStateCache(com.linkedin.venice.kafka.protocol.state.StoreVersionState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateStoreVersionStateCache</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;updateStoreVersionStateCache&#8203;(<a href="../../venice/kafka/protocol/state/StoreVersionState.html" title="class in com.linkedin.venice.kafka.protocol.state">StoreVersionState</a>&nbsp;versionState)</pre>
<div class="block">Used in ingestion isolation mode update the storage engine's cache in sync with the updates to the state in
 <a href="../ingestion/main/MainIngestionStorageMetadataService.html" title="class in com.linkedin.davinci.ingestion.main"><code>MainIngestionStorageMetadataService</code></a></div>
</li>
</ul>
<a id="getStoreVersionState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStoreVersionState</h4>
<pre class="methodSignature">public&nbsp;<a href="../../venice/kafka/protocol/state/StoreVersionState.html" title="class in com.linkedin.venice.kafka.protocol.state">StoreVersionState</a>&nbsp;getStoreVersionState()</pre>
<div class="block">Retrieve the store version state from the metadata partition.</div>
</li>
</ul>
<a id="clearStoreVersionState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearStoreVersionState</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;clearStoreVersionState()</pre>
<div class="block">Clear the store version state in the metadata partition.</div>
</li>
</ul>
<a id="containsPartition(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>containsPartition</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;containsPartition&#8203;(int&nbsp;partitionId)</pre>
<div class="block">Return true or false based on whether a given partition exists within this storage engine</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>partitionId</code> - The partition to look for</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True/False, does the partition exist on this node</dd>
</dl>
</li>
</ul>
<a id="containsPartition(int,com.linkedin.venice.meta.PartitionerConfig)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>containsPartition</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;containsPartition&#8203;(int&nbsp;userPartition,
                                 <a href="../../venice/meta/PartitionerConfig.html" title="interface in com.linkedin.venice.meta">PartitionerConfig</a>&nbsp;partitionerConfig)</pre>
</li>
</ul>
<a id="getNumberOfPartitions()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumberOfPartitions</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getNumberOfPartitions()</pre>
<div class="block">A function which behaves like <code>Map.size()</code>, in the sense that it ignores empty
 (null) slots in the list.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number of non-null partitions in <a href="#partitionList"><code>partitionList</code></a></dd>
</dl>
</li>
</ul>
<a id="getPartitionIds()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPartitionIds</h4>
<pre class="methodSignature">public&nbsp;java.util.Set&lt;java.lang.Integer&gt;&nbsp;getPartitionIds()</pre>
<div class="block">Get all Partition Ids which are assigned to the current Node.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>partition Ids that are hosted in the current Storage Engine.</dd>
</dl>
</li>
</ul>
<a id="getPartitionOrThrow(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPartitionOrThrow</h4>
<pre class="methodSignature">public&nbsp;<a href="AbstractStoragePartition.html" title="class in com.linkedin.davinci.store">AbstractStoragePartition</a>&nbsp;getPartitionOrThrow&#8203;(int&nbsp;partitionId)</pre>
</li>
</ul>
<a id="getPartitionSizeInBytes(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPartitionSizeInBytes</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getPartitionSizeInBytes&#8203;(int&nbsp;partitionId)</pre>
</li>
</ul>
<a id="getCompressionStrategy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCompressionStrategy</h4>
<pre class="methodSignature">public&nbsp;<a href="../../venice/compression/CompressionStrategy.html" title="enum in com.linkedin.venice.compression">CompressionStrategy</a>&nbsp;getCompressionStrategy()</pre>
</li>
</ul>
<a id="isChunked()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isChunked</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isChunked()</pre>
</li>
</ul>
<a id="suppressLogs(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>suppressLogs</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;suppressLogs&#8203;(boolean&nbsp;suppressLogs)</pre>
</li>
</ul>
<a id="hasMemorySpaceLeft()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>hasMemorySpaceLeft</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;hasMemorySpaceLeft()</pre>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
